[package]
name = "qsfs"
version = { workspace = true }
edition = { workspace = true }
license = { workspace = true }
repository = { workspace = true }
homepage = { workspace = true }
categories = { workspace = true }
keywords = { workspace = true }
authors = { workspace = true }
description = "Quantum-Shield File System (QSFS) CLI - Post-quantum file encryption with ML-KEM-1024 and ML-DSA-87 digital signatures"
readme = "README.md"
include = ["src/**", "Cargo.toml", "README.md", "LICENSE*"]

# docs.rs config so feature-gated items are visible
[package.metadata.docs.rs]
all-features = true
rustdoc-args = ["--cfg", "docsrs"]

[[bin]]
name = "qsfs"
path = "src/main.rs"

[features]
# Forward features to qsfs-core so `cargo install --features ...` works on this CLI.
# Defaults keep PQ+hybrid enabled out of the box.
default = ["pq", "hybrid-x25519", "gcm-siv", "cascade", "hsm"]
pq = ["qsfs-core/pq"]
gcm = ["qsfs-core/gcm"]
gcm-siv = ["qsfs-core/gcm-siv"]
cascade = ["qsfs-core/cascade"]
hybrid-x25519 = ["qsfs-core/hybrid-x25519"]
hsm = ["qsfs-core/hsm"]
wasm = ["qsfs-core/wasm"]

[dependencies]
# Do not pin features here; let CLI features forward to the core crate.
qsfs-core = { version = "0.1.4", path = "../qsfs-core", default-features = false }
clap = { version = "4.5", features = ["derive"] }
anyhow = "1.0"
humansize = "2.1"
tokio = { version = "1.38", features = ["fs","io-util","rt-multi-thread","macros"] }
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
postcard = "1.0"
pqcrypto-mlkem = "0.1"
pqcrypto-mldsa = "0.1"
pqcrypto-traits = "0.3"
secrecy = "0.8"
sha2 = "0.10"
hex = "0.4"
base64 = "0.22"
chrono = { version = "0.4", features = ["serde"] }
rand = "0.8"
x25519-dalek = { version = "2.0", default-features = false, features = ["static_secrets"] }
dirs = "5.0"
